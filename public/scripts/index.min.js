function ajax(){var b,a={type:(arguments[0].type||"GET").toUpperCase(),url:arguments[0].url||"",async:arguments[0].async||"true",data:arguments[0].data||null,dataType:arguments[0].dataType||"json",contentType:arguments[0].contentType||"application/x-www-form-urlencoded; charset=utf-8",beforeSend:arguments[0].beforeSend||function(){},success:arguments[0].success||function(){},error:arguments[0].error||function(){}};a.beforeSend(),b=createxmlHttpRequest(),b.responseType=a.dataType,b.open(a.type,a.url,a.async),b.setRequestHeader("Content-Type",a.contentType),b.send(convertData(a.data)),b.onreadystatechange=function(){4===b.readyState&&(200===b.status?a.success(b.response):a.error())}}function createxmlHttpRequest(){return window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest?new XMLHttpRequest:void 0}function convertData(a){var b,c;if("object"==typeof a){b="";for(c in a)b+=c+"="+a[c]+"&";return b=b.substring(0,b.length-1)}return a}function showMsg(a,b,c,d){var e="el-message--"+d;b.innerText=c,a.classList.remove("hidden"),a.classList.add("el-message",e),setTimeout(function(){a.classList.add("el-message-fade-leave","el-message-fade-leave-active")},3e3),setTimeout(function(){a.classList.remove("el-message",e,"el-message-fade-leave","el-message-fade-leave-active"),b.innerText=""},3e3),setTimeout(function(){a.classList.add("hidden")},3e3)}!function(a){function j(a,b,c,d){void 0===d&&(d=!0);var e=-1;return function(){var g,f=[];for(g=0;g<arguments.length;g++)f[g]=arguments[g];-1!==e&&clearTimeout(e),d?(-1===e&&a.apply(void 0,f),e=setTimeout(function(){e=-1,c&&c()},b)):e=setTimeout(function(){a.apply(void 0,f),c&&c()},b)}}function k(){return(a.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)+(document.documentElement.clientHeight||document.body.clientHeight)}function l(a){for(var b=a.offsetTop,c=a.offsetParent;null!==c;)b+=c.offsetTop,c=c.offsetParent;return b}function m(){for(g=0;g<d.length;++g)!function(b){var g,j,m,n,o;f!==c&&(e[b]||(g=l(d[b]),j=k()>=g,j&&(m=d[b].querySelector(".el-image__error"),n=d[b].querySelector("img"),o=n.getAttribute("data-src"),ajax({type:"GET",url:o,async:!0,dataType:"blob",success:function(c){m.classList.add("not-exist"),n.src=a.URL.createObjectURL(c),n.onload=function(){a.URL.revokeObjectURL(n.src)},n.classList.remove("not-exist"),e[b]=!0,++f},error:function(){showMsg(h,i,"图片加载失败","error")}}))))}(g)}var g,h,i,b=a.document,c=6,d=[],e=[],f=0;for(g=1;c>=g;++g)!function(a){var c=b.querySelector("#image-list-item-"+a);d.push(c),e.push(!1)}(g);h=b.querySelector("#index-error-message"),i=h.querySelector("p"),m(),a.addEventListener("scroll",j(function(){m()},100))}(window);
